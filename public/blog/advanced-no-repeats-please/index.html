<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.45 'Open Sans',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:black;font-family:'Open Sans',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;color:inherit;font-family:'Domine',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;color:inherit;font-family:'Domine',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;color:inherit;font-family:'Domine',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;color:inherit;font-family:'Domine',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;color:inherit;font-family:'Domine',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;color:inherit;font-family:'Domine',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}ul{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;font-size:0.85rem;line-height:1.42;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.16rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}blockquote{margin-left:0;margin-right:1.45rem;margin-top:0;padding-bottom:0;padding-left:1.17812rem;padding-right:0;padding-top:0;margin-bottom:1.16rem;font-size:1.1487rem;line-height:1.45rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.27187rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.16rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.16rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.45rem;margin-bottom:calc(1.16rem / 2);margin-top:calc(1.16rem / 2);}li > ul{margin-left:1.45rem;margin-bottom:calc(1.16rem / 2);margin-top:calc(1.16rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.16rem / 2);}code{font-size:0.85rem;line-height:1.45rem;}kbd{font-size:0.85rem;line-height:1.45rem;}samp{font-size:0.85rem;line-height:1.45rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.96667rem;padding-right:0.96667rem;padding-top:0.725rem;padding-bottom:calc(0.725rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;}pre code{background:none;line-height:1.42;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:none;}h1,h2,h3,h4,h5,h6{line-height:1.1;}a{color:#ff5700;text-decoration:none;}a:hover,a:active{color:black;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.45rem;color:black;font-weight:400;}blockquote cite:before{content:"— ";}@media only screen and (max-width:480px){html{font-size:100%;}blockquote{margin-left:-1.0875rem;margin-right:0;padding-left:0.81562rem;}}span, h1 , h2, h3, h4, h5, h6, p{color:#999;}ul, ol{margin:0;}</style><link as="script" rel="preload" href="/83d6cd58f512da6a6ea6dd96bfbf09511419d80b-744605ee7713f03b785c.js"/><style data-href="/styles.6c075c92cac89f908ae9.css">body{background:#fff}.me404{width:1000px;height:480px;position:absolute;top:50%;left:50%;margin-left:-400px;margin-top:-240px}.st0{fill-rule:evenodd;clip-rule:evenodd;fill:#e8ebed}.st1{fill:#fff;stroke:#89949b;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st2{fill-rule:evenodd;clip-rule:evenodd;fill:#dbdfe1}.st3{fill:#fff}.st4{fill-rule:evenodd;fill:#e8ebed}.st4,.st5{clip-rule:evenodd;stroke:#89949b;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st5{fill-rule:evenodd;fill:#fff}.st6{stroke:#89949b;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st6,.st7{fill-rule:evenodd;clip-rule:evenodd;fill:none}.st7{stroke:#89949b;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st8{fill-rule:evenodd;clip-rule:evenodd;fill:#fff;stroke:#89949b;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st9{fill:#89949b}.st10{fill-rule:evenodd;fill:#89949b}.st10,.st11{clip-rule:evenodd}.st11{fill-rule:evenodd;fill:none;stroke:#89949b;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st12,.st13{fill-rule:evenodd;clip-rule:evenodd;fill:#fff}.st13{stroke:#8894a0;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st14{fill-rule:evenodd;clip-rule:evenodd}.st14,.st15{fill:none;stroke:#89949b;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}#cloud{animation:cloud 9s ease-in-out infinite}@keyframes cloud{0%{opacity:.3;left:160px;transform:skewX(20deg)}65%{opacity:1;left:114px;transform:skewX(0deg)}to{opacity:.3;left:160px;transform:skewX(20deg)}}#moon{transform-origin:640px 81px;animation:moon-float 6s ease-in-out infinite}@keyframes moon-float{0%{transform:translateY(20px) scale(1.1)}65%{transform:translate(0) scale(1)}to{transform:translateY(20px) scale(1.1)}}#monkey-eye-l{transform-origin:191px 257px;animation:blink-l 12s ease-in-out infinite}#monkey-eye-r{transform-origin:205px 256px;animation:blink-r 12s ease-in-out infinite}#monkey-arm{transform-origin:155px 298px;animation:monkey-arm 4s ease-in-out infinite}@keyframes monkey-arm{0%{transform:rotate(-10deg)}50%{transform:rotate(20deg)}to{transform:rotate(-10deg)}}@keyframes blink-l{0%{transform:rotateX(0deg)}2%{transform:rotateX(80deg)}4%,20%{transform:rotateX(0deg)}22%{transform:rotateX(80deg)}24%,30%{transform:rotateX(0deg)}32%{transform:rotateX(80deg)}34%,70%{transform:rotateX(0deg)}72%{transform:rotateX(80deg)}74%,to{transform:rotateX(0deg)}}@keyframes blink-r{0%{transform:rotateX(0deg)}2%{transform:rotateX(80deg)}4%,30%{transform:rotateX(0deg)}32%{transform:rotateX(80deg)}34%,50%{transform:rotateX(0deg)}52%{transform:rotateX(80deg)}54%,to{transform:rotateX(0deg)}}#star1{transform-origin:643px 338px;animation:star1 12s linear infinite,star1-fade 12s ease-in-out infinite}#star2{transform-origin:489px 82px;animation:star2 12s linear infinite,star2-fade 12s ease-in-out infinite}#star3{transform-origin:316px 344px;animation:star3 12s linear infinite,star3-fade 12s ease-in-out infinite}#star4{transform-origin:126px 182px;animation:star4 12s linear infinite,star4-fade 12s ease-in-out infinite}@keyframes star1{0%{transform:scale(.5) skewX(15deg) rotate(0deg)}15%{transform:scale(1) skewX(0deg) rotate(1turn)}30%,to{transform:scale(.5) skewX(15deg) rotate(2turn)}}@keyframes star2{0%,15%{transform:scale(.5) skewX(15deg) rotate(0deg)}30%{transform:scale(1) skewX(0deg) rotate(1turn)}45%,to{transform:scale(.5) skewX(15deg) rotate(2turn)}}@keyframes star3{0%,30%{transform:scale(.5) skewX(15deg) rotate(0deg)}45%{transform:scale(1) skewX(0deg) rotate(1turn)}60%,to{transform:scale(.5) skewX(15deg) rotate(2turn)}}@keyframes star4{0%,45%{transform:scale(.5) skewX(15deg) rotate(0deg)}60%{transform:scale(1) skewX(0deg) rotate(1turn)}75%,to{transform:scale(.5) skewX(15deg) rotate(2turn)}}@keyframes star1-fade{0%{opacity:0}15%{opacity:1}30%,to{opacity:0}}@keyframes star2-fade{0%,15%{opacity:0}30%{opacity:1}45%,to{opacity:0}}@keyframes star3-fade{0%,30%{opacity:0}45%{opacity:1}60%,to{opacity:0}}@keyframes star4-fade{0%,45%{opacity:0}60%{opacity:1}75%,to{opacity:0}}#sword-path{animation:tetris-float 3s ease-in-out infinite}#sword,#sword-path{transform-origin:458px 206px}#sword{animation:sword 4s ease-out infinite}@keyframes sword{0%,15%{transform:rotate(-40deg)}87%{transform:rotate(50deg)}to{transform:rotate(-40deg)}}#tetris-path{animation:tetris-float 5s ease-in-out infinite}#tetris,#tetris-path{transform-origin:538px 374px}#tetris{animation:rotate 10s steps(1) infinite alternate}@keyframes rotate{0%{transform:rotate(0deg)}25%{transform:rotate(90deg)}50%{transform:rotate(180deg)}75%{transform:rotate(270deg)}to{transform:rotate(1turn)}}@keyframes tetris-float{0%{transform:translate(0) scale(.9)}65%{transform:translateY(30px) scale(1)}to{transform:translate(0) scale(.9)}}#triforce{transform-origin:175px 91px;animation:triforce-float 3s ease-in-out infinite}lesshat-selector{-lh-property:0}@keyframes triforce-float{0%{transform:translate(0) scale(.9)}65%{transform:translateY(30px) scale(1)}to{transform:translate(0) scale(.9)}}[not-existing]{zoom:1}.authorInfo-module--authorInfo--gr-99{color:#fff}.authorInfo-module--authorInfo--gr-99 .authorInfo-module--imgWrapper--30Yrt{width:128px;height:128px;overflow:hidden;position:relative;box-shadow:0 0 0 2px hsla(0,0%,100%,.5),0 2px 20px 3px rgba(0,0,0,.25);border-radius:300px}.authorInfo-module--authorInfo--gr-99 .authorInfo-module--imgWrapper--30Yrt img{position:absolute;top:-40px}.authorInfo-module--authorInfo--gr-99 .authorInfo-module--authorName--GPPjR{margin:20px 0}.authorInfo-module--authorInfo--gr-99 a{color:#fff}.authorInfo-module--authorInfo--gr-99 a:hover{color:#4d4d4b}.authorInfo-module--authorInfo--gr-99 p{color:#fff}.navLeft-module--navLeft--1SxhG{width:300px;opacity:1;height:100%;background:url(/static/bg2-70973c308892c6eb8c89415e6cc12dc6.jpg) no-repeat 50%;background-size:cover;position:relative;z-index:0}.navLeft-module--navLeft--1SxhG .navLeft-module--overlay--1jp1U{width:100%;height:100%;background-color:rgba(0,0,0,.75);position:absolute;opacity:.7;z-index:-1}.navTop-module--navTop--1_zLH{opacity:1;background:url(/static/bg2-70973c308892c6eb8c89415e6cc12dc6.jpg) no-repeat 50%;background-size:cover;position:relative;z-index:0}.navTop-module--navTop--1_zLH .navTop-module--overlay--11W-h{width:100%;height:100%;background-color:rgba(0,0,0,.75);position:absolute;opacity:.7;z-index:-1}.layout-module--container--280Lj .layout-module--nav--2_Lzo{position:fixed;height:100%;width:300px}@media screen and (min-width:800px){.layout-module--container--280Lj .layout-module--nav--2_Lzo{display:block}}@media screen and (max-width:800px){.layout-module--container--280Lj .layout-module--nav--2_Lzo{display:none}}.article-title{color:#999;margin-left:0;font-weight:400;line-height:35px;margin-bottom:20px;text-align:center;font-size:26px;transition:color .3s}.article-title.left{text-align:left}.article-title:hover{color:#fff}.article-entry h1{font-size:2rem;margin:2rem 0;padding:0;font-weight:700;text-align:center;color:#ff4081}.article-entry h2{padding:0 0 0 20px;line-height:1.8em;position:relative;font-size:1.3em;margin-top:.8em;font-weight:700}.article-entry li{padding-left:1rem}.article-entry ul li{position:relative;padding-left:1.25rem}.article-entry ul li:hover{background:#2e2e2e}.article-entry ul li p{display:inline-block;text-indent:0;padding-left:0!important}.article-entry ul li:before{position:absolute;width:1.25rem;height:1.25rem;left:0;top:.3125rem;content:"\F05D";font:normal normal normal .875rem/1 FontAwesome}.article-entry li code,.article-entry p code{padding:1px 3px;margin:0 3px;color:#d1d1d2;background:rgba(32,33,43,.9);border:1px dashed #20212b;border-radius:3px;word-wrap:break-word;font-size:.875rem}.article-entry a,.article-entry a:hover{color:#4094c7}.article-entry pre{background:#282a36;overflow:auto}.article-entry pre::-webkit-scrollbar{width:4px;height:4px}.article-entry pre::-webkit-scrollbar-thumb{border-radius:5px;-webkit-box-shadow:inset 0 0 5px rgba(0,0,0,.2);background:rgba(0,0,0,.2)}.article-entry pre::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 5px rgba(0,0,0,.2);border-radius:0;background:rgba(0,0,0,.1)}.article-entry-bottom{margin-top:2.5rem}.article-entry-bottom .article-more-link a{background:#258fb8;color:#fff;font-size:12px;padding:2px 8px 4px;line-height:16px;border-radius:2px;transition:background .3s}.article-entry h2:before,.article-entry h4:before,.article-entry h5:before,.article-entry h6:before{position:absolute;content:"";left:0;top:0;bottom:0;width:5px;border-radius:2px;background:#ec407a;box-shadow:inset 0 1px 1px rgba(0,0,0,.5),0 1px 1px hsla(0,0%,100%,.3)}.archives-wrap{position:relative;margin:0 1.875rem;padding-right:3.75rem;border-bottom:2px solid #2f2f2f;color:#999}.archives-wrap:first-child{margin-top:1.875rem}.archives-wrap .archive-year-wrap{line-height:2.1875rem;width:12.5rem;position:absolute;padding-top:.9375rem;font-size:1.8rem}.archives-wrap .archives{position:relative}.archives-wrap .archives .archive-article{margin-left:9.375rem;padding:1.25rem 0;border-bottom:1px solid #2f2f2f;border-top:1px solid #2f2f2f;position:relative}.archives-wrap .archives .archive-article:first-child{border-top:none}.archives-wrap .archives .archive-article:last-child{border-bottom:none}.archives-wrap .archives .archive-article .archive-article-header{position:relative}.archives-wrap .archives .archive-article .archive-article-header .archive-title a{color:#999}.archives-wrap .archives .archive-article .archive-article-header .archive-title a:hover{color:#fff}.archives-wrap .archives .archive-article .archive-article-header time{font-size:.75rem;color:#aaa;margin-top:.1875rem;cursor:default}.archives-wrap .archives .archive-article .archive-article-header time:before{content:"\F073";color:#999;position:relative;margin-right:.625rem;font:.875rem FontAwesome}@media screen and (max-width:800px){.archives-wrap{margin:10px 10px 0;padding:10px 20px 10px 10px}.archives-wrap .archive-year-wrap{position:relative;padding:0}.archives-wrap .archive-year-wrap a{padding:0}.archives-wrap .archives .archive-article{padding:10px 0;margin-left:0}}.main{min-height:100%;position:absolute;background:#3f3f3f;right:0;overflow-x:hidden}.main>div::-webkit-scrollbar{width:4px;height:4px}.main>div::-webkit-scrollbar-thumb{border-radius:5px;-webkit-box-shadow:inset 0 0 5px rgba(0,0,0,.2);background:rgba(0,0,0,.2)}.main>div::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 5px rgba(0,0,0,.2);border-radius:0;background:rgba(0,0,0,.1)}@media screen and (min-width:800px){.navTop{display:none}.main{left:300px}}@media screen and (max-width:800px){.navTop{display:block}.main{left:0}}@font-face{font-family:FontAwesome;src:url(/static/fontawesome-webfont-8b27bc96115c2d24350f0d09e6a9433f.eot);src:url(/static/fontawesome-webfont-8b27bc96115c2d24350f0d09e6a9433f.eot?#iefix) format("embedded-opentype"),url(/static/fontawesome-webfont-3293616ec0c605c7c2db25829a0a509e.woff) format("woff"),url(/static/fontawesome-webfont-dcb26c7239d850266941e80370e207c1.ttf) format("truetype"),url(/static/fontawesome-webfont-b526f0637e912fae979bcfe9f0c9bd74.svg#FontAwesomeRegular) format("svg"),url(/static/fontawesome-webfont-b526f0637e912fae979bcfe9f0c9bd74.svg#FontAwesomeRegular) format("svg");font-weight:400;font-style:normal}body{background:#3f3f3f;color:#999}

/*! https://github.com/lzxb/flex.css */[data-flex]{display:flex}[data-flex]>*{display:block}[data-flex]>[data-flex]{display:flex}[data-flex~="dir:left"]{flex-direction:row}[data-flex~="dir:right"]{flex-direction:row-reverse;-webkit-box-pack:end}[data-flex~="dir:top"]{flex-direction:column}[data-flex~="dir:bottom"]{flex-direction:column-reverse;-webkit-box-pack:end}[data-flex~="main:left"]{justify-content:flex-start}[data-flex~="main:right"]{justify-content:flex-end}[data-flex~="main:justify"]{justify-content:space-between}[data-flex~="main:center"]{justify-content:center}[data-flex~="cross:top"]{align-items:flex-start}[data-flex~="cross:bottom"]{align-items:flex-end}[data-flex~="cross:center"]{align-items:center}[data-flex~="cross:baseline"]{align-items:baseline}[data-flex~="cross:stretch"]{align-items:stretch}[data-flex~="box:first"]>*,[data-flex~="box:justify"]>*,[data-flex~="box:last"]>*,[data-flex~="box:mean"]>*{width:0;height:auto;flex-grow:1;flex-shrink:1}[data-flex~="box:first"]>:first-child,[data-flex~="box:justify"]>:first-child,[data-flex~="box:justify"]>:last-child,[data-flex~="box:last"]>:last-child{width:auto;flex-grow:0;flex-shrink:0}[data-flex~="dir:bottom"][data-flex~="box:first"]>*,[data-flex~="dir:bottom"][data-flex~="box:justify"]>*,[data-flex~="dir:bottom"][data-flex~="box:last"]>*,[data-flex~="dir:bottom"][data-flex~="box:mean"]>*,[data-flex~="dir:top"][data-flex~="box:first"]>*,[data-flex~="dir:top"][data-flex~="box:justify"]>*,[data-flex~="dir:top"][data-flex~="box:last"]>*,[data-flex~="dir:top"][data-flex~="box:mean"]>*{width:auto;height:0;flex-grow:1;flex-shrink:1}[data-flex~="dir:bottom"][data-flex~="box:first"]>:first-child,[data-flex~="dir:bottom"][data-flex~="box:justify"]>:first-child [data-flex~="dir:bottom"][data-flex~="box:justify"]>:last-child,[data-flex~="dir:bottom"][data-flex~="box:last"]>:last-child,[data-flex~="dir:top"][data-flex~="box:first"]>:first-child,[data-flex~="dir:top"][data-flex~="box:justify"]>:first-child,[data-flex~="dir:top"][data-flex~="box:justify"]>:last-child,[data-flex~="dir:top"][data-flex~="box:last"]>:last-child{height:auto;flex-grow:0;flex-shrink:0}[data-flex-box="0"]{flex-grow:0;flex-shrink:0}[data-flex-box="1"]{flex-grow:1;flex-shrink:1}[data-flex-box="2"]{flex-grow:2;flex-shrink:2}[data-flex-box="3"]{flex-grow:3;flex-shrink:3}[data-flex-box="4"]{flex-grow:4;flex-shrink:4}[data-flex-box="5"]{flex-grow:5;flex-shrink:5}[data-flex-box="6"]{flex-grow:6;flex-shrink:6}[data-flex-box="7"]{flex-grow:7;flex-shrink:7}[data-flex-box="8"]{flex-grow:8;flex-shrink:8}[data-flex-box="9"]{flex-grow:9;flex-shrink:9}[data-flex-box="10"]{flex-grow:10;flex-shrink:10}.listWrapper-module--hide--2daIu{visibility:hidden}.listWrapper-module--listWrapper--FBSVx{margin:30px;position:relative;transition:all .2s ease-in}.listWrapper-module--listWrapper--FBSVx .listWrapper-module--listContent--6okCO{position:relative;border:1px solid #2f2f2f;margin-bottom:20px;padding:20px;border-radius:6px;box-shadow:4px 4px 18px rgba(0,0,0,.46)}.listWrapper-module--listWrapper--FBSVx .listWrapper-module--listContent--6okCO ol,.listWrapper-module--listWrapper--FBSVx .listWrapper-module--listContent--6okCO p,.listWrapper-module--listWrapper--FBSVx .listWrapper-module--listContent--6okCO ul{list-style:none}.listWrapper-module--listWrapper--FBSVx .listWrapper-module--listContent--6okCO ol,.listWrapper-module--listWrapper--FBSVx .listWrapper-module--listContent--6okCO ul{margin:0}@media screen and (min-width:800px){.listWrapper-module--listContent--6okCO ol,.listWrapper-module--listContent--6okCO p,.listWrapper-module--listContent--6okCO ul{padding-left:1rem}}@media screen and (max-width:800px){.listWrapper-module--listContent--6okCO ol,.listWrapper-module--listContent--6okCO p,.listWrapper-module--listContent--6okCO ul{padding-left:0}}.tagInfo-module--tagInfoWrap--e-EOI{width:100%;display:flex;flex-wrap:wrap;align-items:center;font-size:.75rem}.tagInfo-module--tagInfoWrap--e-EOI a{display:inline-block;text-decoration:none;font-weight:400;font-size:.625rem;color:#fff;height:1.125rem;line-height:1.125rem;padding:0 5px 0 10px;position:relative;border-radius:0 5px 5px 0;margin:5px 9px 5px 8px}.tagInfo-module--tagInfoWrap--e-EOI a:before{content:" ";width:0;height:0;position:absolute;top:0;left:-1.125rem;border:9px solid transparent}.tagInfo-module--tagInfoWrap--e-EOI a:after{content:" ";width:4px;height:4px;background-color:#fff;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.3);position:absolute;top:7px;left:2px}.tagInfo-module--tagInfoWrap--e-EOI .tagInfo-module--tagClassify--11TLD:before{color:#999;content:"\F02D";font:1rem FontAwesome;float:left;margin-right:.625rem;padding-top:.3125rem}.tagInfo-module--tagInfoWrap--e-EOI .tagInfo-module--tagClassify--11TLD a{background:#e23794}.tagInfo-module--tagInfoWrap--e-EOI .tagInfo-module--tagClassify--11TLD a:before{border-right-color:#e23794}.tagInfo-module--tagInfoWrap--e-EOI .tagInfo-module--tagClassify--11TLD a:hover{color:#ddd}.tagInfo-module--tagInfoWrap--e-EOI .tagInfo-module--tagList--2JajG{flex-wrap:wrap}.tagInfo-module--tagInfoWrap--e-EOI .tagInfo-module--tagList--2JajG:before{color:#999;content:"\F02E";font:1rem FontAwesome;float:left;margin-right:.625rem;margin-top:.3125rem}.tagInfo-module--tagInfoWrap--e-EOI .tagInfo-module--tagList--2JajG .tagInfo-module--tag--1NeBn a{background:#4cae4c}.tagInfo-module--tagInfoWrap--e-EOI .tagInfo-module--tagList--2JajG .tagInfo-module--tag--1NeBn a:before{border-right-color:#4cae4c}.tagInfo-module--tagInfoWrap--e-EOI .tagInfo-module--tagList--2JajG .tagInfo-module--tag--1NeBn a:hover{color:#ddd}.paganation-module--paganation--2bE_X{text-align:center;padding:30px 0}.paganation-module--paganation--2bE_X:hover .paganation-module--extend--2q4Qk{opacity:1}.paganation-module--paganation--2bE_X .paganation-module--extend--2q4Qk{color:#999;margin:0 27px;opacity:0}.paganation-module--paganation--2bE_X .paganation-module--hide--wBlxP{opacity:0}.paganation-module--paganation--2bE_X .paganation-module--pageNumber--RUHS6{width:20px;height:20px;background:#4d4d4d;border-radius:50%;display:inline-block;color:#fff;line-height:20px;font-size:12px;margin:0 3px 30px}.paganation-module--paganation--2bE_X .paganation-module--pageNumber--RUHS6:hover{background:#5e5e5e}.paganation-module--paganation--2bE_X .paganation-module--pageNumber--RUHS6.paganation-module--current--39YZ4{background:#4094c7;cursor:default}.paganation-module--paganation--2bE_X .paganation-module--pageNumber--RUHS6.paganation-module--current--39YZ4:hover{background:#4094c7}.hljs{display:block;overflow-x:auto;padding:.5em;color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><link href="//fonts.googleapis.com/css?family=Domine:700|Open+Sans:400,400i,700,700i" rel="stylesheet" type="text/css"/><link as="script" rel="preload" href="/styles-89fd2ae28bdf06750a71.js"/><link as="script" rel="preload" href="/component---src-templates-blog-small-jsx-7847ba26c250224f083e.js"/><meta name="generator" content="Gatsby 2.24.63"/><link as="script" rel="preload" href="/framework-31fa3cffff5950ebff26.js"/><link as="script" rel="preload" href="/app-03a564126170dae91f0b.js"/><link as="script" rel="preload" href="/webpack-runtime-c691ad7dc71c44256655.js"/><link as="fetch" rel="preload" href="/page-data\blog\advanced-no-repeats-please\page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2566592090.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data\app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout-module--container--280Lj"><div class="layout-module--nav--2_Lzo"><div class="navLeft-module--navLeft--1SxhG" data-flex="main:center cross:center"><div class="navLeft-module--overlay--1jp1U"></div><header class="authorInfo-module--authorInfo--gr-99" data-flex="dir:top cross:center"><a href="/"><div class="authorInfo-module--imgWrapper--30Yrt"><img src="/static/cat-4c59261f56e727d38ef6862edcb9a7d4.jpg" alt=""/></div></a><hgroup data-flex="dir:top cross:center"><h2 class="authorInfo-module--authorName--GPPjR"><a href="/">Francis</a></h2><p>前端小白，光吃不做</p></hgroup></header></div></div><div class="main"><div class="navTop"><div id="navTop"><div class="navTop-module--navTop--1_zLH"><div class="navTop-module--overlay--11W-h"></div><header class="authorInfo-module--authorInfo--gr-99" data-flex="dir:top cross:center"><a href="/"><div class="authorInfo-module--imgWrapper--30Yrt"><img src="/static/cat-4c59261f56e727d38ef6862edcb9a7d4.jpg" alt=""/></div></a><hgroup data-flex="dir:top cross:center"><h2 class="authorInfo-module--authorName--GPPjR"><a href="/">Francis</a></h2><p>前端小白，光吃不做</p></hgroup></header></div></div></div><div class="blogList"><span><article class="listWrapper-module--listWrapper--FBSVx"><div class="listWrapper-module--listContent--6okCO"><div></div><a aria-current="page" class="" href="/blog/advanced-no-repeats-please/"><h1 class="article-title">FreeCodeCamp 高级算法题 - 字符串排列</h1></a><div class="tagInfo-module--tagInfoWrap--e-EOI"><div class="tagInfo-module--tagClassify--11TLD"><a href="/category/FCC">FCC</a></div><div class="tagInfo-module--tagList--2JajG" data-flex="main:left"><div class="tagInfo-module--tag--1NeBn"><a href="/tag/FreeCodeCamp">FreeCodeCamp</a></div><div class="tagInfo-module--tag--1NeBn"><a href="/tag/高级">高级</a></div><div class="tagInfo-module--tag--1NeBn"><a href="/tag/算法">算法</a></div></div></div><div class="article-entry"><h1>字符串排列 (No repeats please)</h1>
<h2>题目链接</h2>
<ul>
<li><a href="https://freecodecamp.cn/challenges/no-repeats-please">中文链接</a></li>
<li><a href="https://freecodecamp.com/challenges/no-repeats-please">英文链接</a></li>
</ul>
<h2>问题解释</h2>
<ul>
<li>这个 <code>function</code> 接收一个字符串参数 <code>str</code>。返回值为参数 <code>str</code> 没有连续重复字符串的排列个数</li>
<li>如果 <code>str</code> 为 <code>"aab"</code>，则返回值应为 <code>2</code>，因为全排列后，会出现两个 <code>"aba"</code>，不含连续重复字符串 (排除 <code>"aab"</code> 和 <code>"baa"</code>)</li>
</ul>
<!--more-->
<h1>解题思路</h1>
<ul>
<li>这道题应该是高级算法题目中难度稍大的一道题。题目的难点在于获取字符串的全排列。我觉得这里有必要先说一下，如何获取全排列</li>
<li>只要我们可以获取字符串的全排列，那就至少有两种方式判断字符串是否含有连续重复的字符。可以遍历，也可以用正则</li>
<li><a href="https://zh.wikipedia.org/wiki/%E7%BD%AE%E6%8F%9B">排列 (也叫置换)，Permutation</a> 与 <a href="https://zh.wikipedia.org/wiki/%E7%B5%84%E5%90%88">组合，Combination</a>，高中数学就已经涉及到。比如，对于 <code>123</code>，从中取出两个数有三种组合，分别是 <code>12</code>、<code>13</code> 和 <code>23</code>。同样是取出两个数，有六种排列，分别是 <code>12</code>、<code>21</code>、<code>13</code>、<code>31</code>、<code>23</code> 和 <code>32</code></li>
<li>再说一下什么是全排列 (Full Permutation)，全排列的意思是，从 <code>n</code> 个中取出 <code>n</code> 个的排列。对于 <code>123</code>，取出三个数的排列，就是 <code>123</code> 的全排列。<code>123</code> 的全排列总共有六种，分别是 <code>123</code>、<code>132</code>、<code>213</code>、<code>231</code>、<code>312</code> 和 <code>321</code>。计算数量方式很简单，就是 <code>n!</code>，<code>n</code> 的阶乘。对于 <code>123</code> 来说，也就是 <code>3!</code>，得 <code>6</code></li>
</ul>
<h2>全排列的实现 - 封装，循环</h2>
<ul>
<li>
<p>我们可以先根据这个实际的例子想想，怎样才能无遗漏的输出全排列</p>
<ul>
<li>两个数就不用说了，对于 <code>12</code>，只有 <code>12</code> 和 <code>21</code> 两种</li>
<li>
<p>三个数，比如 <code>123</code>，我们先分为三种情况，就是 <code>1</code> 开头，<code>2</code> 开头和 <code>3</code> 开头</p>
<ul>
<li>对于 <code>1</code> 开头的情况，剩下 <code>2</code> 和 <code>3</code>，这就回到了两个数的排列</li>
<li>对于 <code>2</code> 开头的情况，剩下 <code>1</code> 和 <code>3</code>，这也回到了两个数的排列</li>
<li><code>3</code> 开头的情况同理</li>
</ul>
</li>
<li>四个数，先按照开头分为四种情况，然后按照三个数的排列去处理</li>
<li>......</li>
<li>以此类推</li>
</ul>
</li>
<li>你可能已经看出来了，这就是一个递归。就好像求斐波那契数列的某一个元素，我们要先求出前面的；要想求出前面的，我们就要求出更前面的。记 "斐波那契数列的第 <code>n</code> 位" 这件事为 <code>F(n)</code>，则有 <code>F(n) = F(n - 1) + F(n - 2)</code></li>
<li>类似地，记 "求出 <code>n</code> 个字符串的全排列" 这件事为 <code>P(n)</code>，则有 <code>P(n) = 分别以这n个字符之一开头 + P(n - 1)</code>。其中，<code>P(n - 1)</code> 表示去掉那个开头字符的剩余字符串的全排列。哪怕只有两个字符，比如对于上面例子中的 <code>12</code>，同样符合这一条结论</li>
<li>以 <code>'abc'</code> 为例，执行步骤如下：</li>
</ul>
<pre><code>给出 abc

1. a 作为开头 -> 求 bc 全排列 -> 得到 bc 和 cb -> 与 a 合并 -> 得到 abc 和 acb
2. b 作为开头 -> 求 ac 全排列 -> 得到 ac 和 ca -> 与 b 合并 -> 得到 bac 和 bca
3. c 作为开头 -> 求 ab 全排列 -> 得到 ab 和 ba -> 与 c 合并 -> 得到 cab 和 cba
</code></pre>
<ul>
<li>注意，这只是其中一种实现方式。后面我们还会看到另一种实现</li>
<li>首先我们来想一下公共逻辑是什么。对于一个字符串，我们取出一个字符作为开头，然后对去掉这个开头字符的剩余字符串继续求全排列。求出来之后，与取到的字符合并起来就行</li>
<li>对于 <code>P(n)</code> 来说，我们要取出一个字符作为开头，而且原始的字符串可能本身就含有重复的字符。在代码中，我们可以通过开头字符在原字符串中的索引来区分</li>
<li>对于我们封装的函数，可以直接使用字符串作为参数。这是因为，在获取剩余字符串全排列，即 <code>P(n - 1)</code> 时，我们并不关心去掉的那个，用作开头的字符是什么，只需要关心现在我们要生成谁的全排列就好</li>
<li>因此，我们需要在递归调用时，传入去掉那个用作开头的字符之后的，剩余字符串。这个很容易实现，如果我们知道了去掉的那个字符的索引，那我们就可以用 <code>str.slice(0, i)</code> 来获取这个字符之前的字符串，用 <code>str.slice(i + 1, str.length)</code> 来获取这个字符之后的字符串 (注意，<code>slice</code> 方法的第一个参数是包含的，第二个不包含。如果 <code>i</code> 本身就是 <code>0</code>，那么取到的是 <strong>空字符串</strong>)，拼接在一起就可以作为递归调用的参数</li>
<li>跳出条件也不难想，只要传入的参数长度为 <code>1</code> 或 <code>0</code>，直接返回即可</li>
<li>另外，每次调用，我们都需要一个数组来保存根据当前参数生成的全排列。代码如下</li>
</ul>
<pre><code class="language-js">function permAlone(string) {
    function _perm(str) {
        // 跳出条件
        if (str.length &#x3C; 2) return str;
        var permutations = [];

        for (var i = 0; i &#x3C; str.length; i++) {
            // 获取开头的字符串和剩余字符串
            var start = str[i];
            var remaining = str.slice(0, i) + str.slice(i + 1, str.length);

            // 根据通过剩余字符串的全排列，生成前一次的全排列。注意 _perm(remaining) 是一个数组
            for (var permutation of _perm(remaining)) {
                permutations.push(start + permutation);
            }
        }
        return permutations;
    }
}
</code></pre>
<h2>判断连续重复字符</h2>
<h3>遍历</h3>
<ul>
<li>判断是否有连续重复的字符，最简单的方式是遍历。只需要在外面用一个变量记录上一个字符就可以</li>
<li>只要当前的和上一个相同，直接跳出就可以，不需要继续判断。代码如下：</li>
</ul>
<pre><code class="language-js">function hasRepeatChar(str) {
    var previous = '';
    for (var i = 0; i &#x3C; str.length; i++) {
        if (previous === str[i]) {
            return true;
        } else {
            // 赋值，用于下次判断
            previous = str[i];
        }
    }
    // 不存在连续重复字符
    return false;
}
</code></pre>
<h3>递归</h3>
<ul>
<li>递归也是很容易写的。跟上面的思路一样，调用的时候传入两个参数，分别是上一个字符，和剩余字符串。其中，剩余字符串可以通过 <code>str.slice(1)</code> 获取</li>
<li>为避免 <code>str</code> 本身就是空字符串，需要多一次判断，即如果 <code>prevChar</code> 不是空的 (这说明 <code>prevChar</code> 被赋过值，而并非初始的空值)，我们才可以认为 <code>str</code> 不含连续重复字符，则返回 <code>false</code>。因此，跳出条件是 <code>str</code> 为空且 <code>prevChar</code> 有值。如果这时候 <code>prevChar</code> 也是空的，那就证明传入的 <code>str</code> 本身就是空的。为了防止混淆，我们直接给它返回 <code>"Empty string"</code>。事实上，这种 corner case 在这道题目中不会遇到。代码如下：</li>
</ul>
<pre><code class="language-js">function hasRepeatChar(str, prevChar) {
    if (str.length === 0) return prevChar ? false : 'Empty string';
    if (prevChar === str[0]) return true;

    return hasRepeatChar(str.slice(1), str[0]);
}
</code></pre>
<h3>正则表达式</h3>
<ul>
<li>正则是个好东西。在正则里，有一中写法叫做 <code>back reference</code>，就是 <code>\\</code> 后面加一个正整数。请参考 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions">文档</a> 中 <code>\\n</code> 的那一行</li>
<li>简单来说，<code>\\x</code> 就是匹配之前，正数第 <code>x</code> 个 matched group (匹配组，也叫捕获组，其实就是小括号包含的内容)</li>
<li>对于判断一个字符串是否含有连续重复字符，我们并不关注它重复了几次，也不需要关注它有几组重复的。因此，这里不需要 <code>global</code> flag <code>/g</code></li>
<li>那么，对于字符串中的任意字符，只要这个字符右边的字符和它相同，那就匹配到，并且返回 <code>false</code>。听起来像是句废话，只是，如果你看不懂后面的正则，记得回来再读读这句话。代码如下：</li>
</ul>
<pre><code class="language-js">function hasRepeatChar(str) {
    return !/(\w)\1/.test(str);
}
</code></pre>
<h1>基本解法</h1>
<h2>思路提示</h2>
<ul>
<li>思路上面已经说得很清楚。通过上面的递归调用，我们可以得到了一个包含字符串全排列的数组，只需要通过上面的正则过滤一下，保留不含连续重复字符的字符串，并返回它的 <code>length</code></li>
</ul>
<h2>代码</h2>
<pre><code class="language-js">function permAlone(string) {
    function _perm(str) {
        if (str.length &#x3C; 2) return str;
        var permutations = [];

        for (var i = 0; i &#x3C; str.length; i++) {
            var start = str[i];
            var remaining = str.slice(0, i) + str.slice(i + 1, str.length);

            for (var permutation of _perm(remaining)) {
                permutations.push(start + permutation);
            }
        }
        return permutations;
    }
    return _perm(string).filter(function(str) {
        return !/(\w)\1/.test(str);
    }).length;
}
</code></pre>
<h1>数组方法 - 思路的优化</h1>
<h2>思路提示</h2>
<ul>
<li>上面的方式是把子问题 (剩余字符串的全排列) 添加到之前取出的开头字符后面，这也就意味着，对于长度为 <code>n</code> 的字符串 <code>string</code>，开头的字符我们要获取 <code>n</code> 次。每一次取了开头，我们又要再对子问题进行 <code>n - 1</code> 次取开头的操作，因此这时候的时间复杂度会是 <code>n!</code>。效率很低</li>
<li>如果我们换一个思路，采用 "插值" 的方法，会让整体操作变少一些。注意，这个思路并不一定需要用数组去实现。确切的说，如果不用数组去实现，效率会更高。只是个人觉得，用数组会比较容易写，也比较容易理解</li>
<li>之前的方式，如果我们说它是 "从前往后" 实现的，那现在我们来试试从后往前实现</li>
<li>对于字符串 <code>'abc'</code>，给出子串 <code>'bc'</code>，剩余 <code>'a'</code>。我们可以通过把 <code>'a'</code> 放到 <code>'bc'</code> 里面，不同的位置来实现排列。注意到 <code>'bc'</code> 有三个位置可以插入 <code>'a'</code>，分别是：</li>
</ul>
<pre><code> b c
↑ ↑ ↑
1 2 3
</code></pre>
<ul>
<li>如果把 <code>'a'</code> 分别插入上面说的位置 <code>1</code>、<code>2</code> 和 <code>3</code>，我们就可以得到 <code>'abc'</code>、<code>'bac'</code> 和 <code>'bca</code></li>
<li><code>'bc'</code> 排列还有一种情况 <code>'cb'</code>。再把 <code>'a'</code> 插入到 <code>'cb'</code> 的三个位置，我们就可以得到另外三种排列</li>
<li>注意到，<code>'bc'</code> 和 <code>'cb'</code>，其实就是在子串 <code>'c'</code> 中插入 <code>'b'</code> 产生的。因为 <code>'c'</code> 只有两个位置可以插入 <code>'b'</code>：</li>
</ul>
<pre><code> c
↑ ↑
1 2
</code></pre>
<ul>
<li>这样，我们就得到了一个新的递归思路，如下 (左边的竖线只是为了方便看清递归弹出的时候对应上面的哪一步，弹出步骤中的插入值与上面取出的第一个字符相对应)：</li>
</ul>
<pre><code>给出 'abc'

|- 取出第一个字符 a，剩余 bc
|  |- 取出第一个字符 b，剩余 c
|  |  |- 取出第一个字符 c，剩余空字符串 (划重点，这个就是弹出的条件)
|  |  |- 在上次剩余值中插入 c，只能得到一种情况 c
|  |- 在上次剩余值 (c) 中插入 b，得到 bc 和 cb
|- 在上次剩余值 (bc 和 cb) 中插入 a，得到 abc, bac, bca 和 acb, cab, cba
</code></pre>
<ul>
<li>这个思路很像是，先一直走到底 (即长度为 0 的时候)，弹出的过程中，我们再来生成需要的结果</li>
<li>这段代码加注释不太方便，详细解释还是写到代码之后吧</li>
<li>如果你还是不知道如何写代码，不要怕麻烦，试着写出来 <code>'abcd'</code> 的详细过程，写完你就能理解了</li>
</ul>
<h2>代码</h2>
<pre><code class="language-js">function permAlone(string) {
    return _perm(string.split('')).filter(function(str) {
        return !/(\w)\1/.test(str);
    }).length;

    function _perm(arr) {
        return arr.length === 0 ? [[]] : _perm(arr.slice(1)).reduce(function(accum, curr) {
            // 插值的实现
            for (var i = 0; i &#x3C; arr.length; i++) {
                accum.push([curr.slice(0, i), arr[0], curr.slice(i)].join(''));
            }
            return accum;
        }, []);
    }
}
</code></pre>
<h2>解释</h2>
<ul>
<li>先说一句，上面的代码，尽管思路优化了，但速度理论上会比之前的慢，因为咱们用了数组</li>
<li>外面那层应该没啥疑问，既然决定了用数组去处理，那就干脆直接传入数组，一个 <code>split</code> 的事儿而已</li>
<li>封装的 <code>_perm</code>，其实还是要进行递归调用的。当外面的 <code>string</code> 是空字符串时，返回值是 <code>[[]]</code>，而不可以是 <code>[]</code>。原因很简单，如果是 <code>[]</code>，那么 <code>reduce</code> 就不会执行了，因为没有元素。你可以试试以下的代码片段，就理解了：</li>
</ul>
<pre><code class="language-js">// 不会输出 '执行了'，返回值是 []
[].reduce((accum, curr) => {
    console.log('执行了');
    return accum;
}, []);

// 会输出 '执行了'，返回值也是 []
[[]].reduce((accum, curr) => {
    console.log('执行了');
    return accum;
}, []);
</code></pre>
<ul>
<li>只要 <code>arr</code> 长度不为 <code>0</code>，那我们就递归调用 <code>_perm(arr.slice(1))</code>，直到遇到传入的 <code>arr</code> 长度为 <code>0</code>，才开始执行 <code>reduce</code> 弹出的过程。详情请看上面的思路分析</li>
<li>里面的 <code>for</code> 循环很重要，"插值" 这个核心步骤就是在这里实现的。如果看不懂这个过程，请去了解一下 <code>slice</code> 方法是怎么回事，然后举几个例子带进去试一试就明白了</li>
</ul>
<h1>算法优化 - Heap's algorithm</h1>
<h2>思路提示</h2>
<ul>
<li>注意，这里的 Heap 不是指数据结构的 "堆"，而是发明者的名字。如果你从来没听说过这个算法，那只靠自己想可能有些困难</li>
<li>
<p>给出字符串 <code>'abc'</code>，我们可以按照先确定结尾字符的思路来这样推一下：</p>
<ul>
<li>
<p><code>'c'</code> 作为结尾：</p>
<ul>
<li>我们得到第一个排列 <code>'abc'</code></li>
<li>通过交换 <code>'a'</code> 和 <code>'b'</code>，我们可以得到另一种排列 <code>'bac'</code></li>
</ul>
</li>
<li>
<p>交换开头结尾，这时候 <code>'b'</code> 作为结尾：</p>
<ul>
<li>得到 <code>'cab'</code></li>
<li>通过交换 <code>'c'</code> 和 <code>'a'</code>，得到 <code>'acb'</code></li>
</ul>
</li>
<li>
<p>交换开头结尾，这时候 <code>'a'</code> 作为结尾：</p>
<ul>
<li>得到 <code>'bca'</code></li>
<li>通过交换 <code>'b'</code> 和 <code>'c'</code>，得到 <code>'cba'</code></li>
</ul>
</li>
</ul>
</li>
<li>思路大致上是这样，通过交换去实现。交换的好处在于，我们不需要额外的空间去存储。值得注意的是，在 JavaScript 中，字符串可以通过 index 访问某一个位置的字符，但不可以修改它的值。因此，想要换位，我们还是要通过数组来实现的</li>
<li>事实上，真正实现起来还与上面的例子有区别。在 <code>Heap's Algorithm</code> 的 <a href="https://en.wikipedia.org/wiki/Heap%27s_algorithm">维基百科页面</a> 有详细的解释，也有四个元素的详细步骤示例。其实，并不是 "交换开头结尾" 这么简单的</li>
<li>实现数组中元素交换的方式也非常多。有朋友可能首先想到的是用 <code>splice</code>，但这样做效率会很低，我会比较推荐用变量缓存一个值的做法，很容易写。比如，我们需要交换 index 为 <code>2</code> 和 <code>4</code> 的元素：</li>
</ul>
<pre><code class="language-js">var arr = [1, 2, 3, 4, 5, 6];

var temp = arr[2];
arr[2] = arr[4];
arr[4] = temp;

console.log(arr);  // [1, 2, 5, 4, 3, 6]
</code></pre>
<ul>
<li>当然，还有一种比较好玩儿的黑科技：</li>
</ul>
<pre><code class="language-js">var arr = [1, 2, 3, 4, 5, 6];
arr[2] = [arr[4], arr[4] = arr[2]][0]

console.log(arr);  // [1, 2, 5, 4, 3, 6]
</code></pre>
<ul>
<li>如果你听说过 ES6 的解构赋值，也可以这么写。注意这个在不支持 ES6 的浏览器里是不行的：</li>
</ul>
<pre><code class="language-js">var arr = [1, 2, 3, 4, 5, 6];
[arr[2], arr[4]] = [arr[4], arr[2]]

console.log(arr);  // [1, 2, 5, 4, 3, 6]
</code></pre>
<ul>
<li>维基百科页面也提供了伪代码，而且提供了递归和非递归的两个版本。两个版本都用到了两个参数，但我们只需要一个 <code>n</code> 就够了，不需要第二个 <code>A</code>，因为我们的数组可以通过 <code>var arr = str.split('');</code> 将它定义到函数 <code>generate</code> 外面。这样，伪代码如下：</li>
</ul>
<pre><code class="language-js">函数 generate
参数 num

如果 num 等于 1:
    arr.join('')，并添加到结果数组
否则:
    循环，0 至 num:
        递归调用 generate(num - 1)
        如果 num 为偶数:
            交换 strArr[i] 与 strArr[num - 1]
        如果 num 为奇数:
            交换 strArr[0] 与 strArr[num - 1]
</code></pre>
<h2>代码</h2>
<pre><code class="language-js">function permAlone(str) {
    var arr = str.split('');
    var result = [];
    // 声明需要放在这里，因为赋值是在弹出的时候执行的
    var tempIndex;

    function generate(num) {
        if (num === 1) {
            result.push(arr.join(''));
        } else {
            for (var i = 0; i &#x3C; num; i++) {
                generate(num - 1);
                tempIndex = num % 2 ? 0 : i;
                arr[tempIndex] = [arr[num - 1], arr[num - 1] = arr[tempIndex]][0];
            }
        }
    }
    
    generate(arr.length);
    
    return result.filter(function(str) {
        return !/(\w)\1/.test(str);
    }).length;
}
</code></pre></div></div></article></span></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/advanced-no-repeats-please/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-86eae43148bf2d393162.js"],"app":["/app-03a564126170dae91f0b.js"],"component---src-pages-404-js":["/component---src-pages-404-js-52d225bf1fd405f33e03.js"],"component---src-pages-all-file-js":["/component---src-pages-all-file-js-8a4e9b634903be2f7e84.js"],"component---src-pages-index-js":["/component---src-pages-index-js-2ae84adc87fbf451f4b1.js"],"component---src-templates-blog-small-jsx":["/component---src-templates-blog-small-jsx-7847ba26c250224f083e.js"],"component---src-templates-category-jsx":["/component---src-templates-category-jsx-59463967dee71859a4f9.js"],"component---src-templates-index-jsx":["/component---src-templates-index-jsx-1afb50278c9b0fcb6759.js"],"component---src-templates-tag-jsx":["/component---src-templates-tag-jsx-428646eb6a5d437de98d.js"]};/*]]>*/</script><script src="/polyfill-86eae43148bf2d393162.js" nomodule=""></script><script src="/webpack-runtime-c691ad7dc71c44256655.js" async=""></script><script src="/app-03a564126170dae91f0b.js" async=""></script><script src="/framework-31fa3cffff5950ebff26.js" async=""></script><script src="/83d6cd58f512da6a6ea6dd96bfbf09511419d80b-744605ee7713f03b785c.js" async=""></script><script src="/component---src-templates-blog-small-jsx-7847ba26c250224f083e.js" async=""></script><script src="/styles-89fd2ae28bdf06750a71.js" async=""></script></body></html>